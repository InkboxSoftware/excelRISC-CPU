BALLADDRESS = $01
BALLDIRADDRESS = $02
LASTBALLADDRESS = $03
BALLCOLORADDRESS = $04
BALLX = $05
BALLY = $06

INIT:
	;SET BALL TO LOCATION $55
	LDI $55
	PUSH
	PUSH
	LDI BALLADDRESS
	STR
	LDI LASTBALLADDRESS
	STR
	;SET X AND Y TO 5 (EASIER THAN RUNNING CALCS TO CHECK THEM LATER)
	LDI $05
	PUSH
	PUSH
	LDI BALLX
	STR
	LDI BALLY
	STR
	;BALL DIRECTION DEFAUL TO 0
	;SET COLOR TO $3E
	LDI $3E
	PUSH
	LDI BALLCOLORADDRESS
	STR

MOVEBALL:
	;INCREASE BALL IN DIRECTION
	LDI BALLDIRADDRESS
	PUSH
	LDR	;DIRECTION NOW IN REGISTER
	CMP #03
	BGE MOVEBOTTOMRIGHT
	CMP #02
	;BGE MOVETOPLEFT
	CMP #01
	;BGE MOVETOPRIGHT
MOVEBOTTOMLEFT:
	;SUB 1 FROM LOCATION
	LDI BALLADDRESS
	PUSH
	LDR
	PUSH
	LDI $FF
	CLC
	ADD
	PUSH
	LDI BALLADDRESS
	STR
	;DECREASE X, INCREASE Y
	LDI BALLX
	PUSH
	LDR
	PUSH
	LDI $FF
	CLC
	ADD
	PUSH
	PUSH
	LDI BALLX
	STR
	POP
	CMP $01
	BGE MOVEY-BOTTOMLEFT
		;CHANGE DIRECTION TO 3
		LDI #03
		PUSH
		LDI BALLDIRADDRESS
		STR
	MOVEY-BOTTOMLEFT:
	;ADD 16 TO LOCATION
	LDI BALLADDRESS
	PUSH
	LDR
	PUSH
	LDI $10
	CLC
	ADD
	PUSH
	LDI BALLADDRESS
	STR
	;BALL-Y
	LDI BALLY
	PUSH
	LDR
	PUSH
	LDI #01
	CLC
	ADD
	PUSH
	PUSH
	LDI BALLY
	STR
	POP
	CMP $0F
	BGE CHANGEY-BOTTOMLEFT
	SEC
	BGE DRAWBALL
	CHANGEY-BOTTOMLEFT:
	;ELSE SET BALL DIRECTION TO 1
		LDI #01
		PUSH
		LDI BALLDIRADDRESS
		STR
	;END-MOVEBOTTOMLEFT
	SEC
	BGE DRAWBALL
BACKPEDAL-BALL:
	SEC
	BGE MOVEBALL
MOVEBOTTOMRIGHT:
	;ADD 1 TO LOCATION
	LDI BALLADDRESS
	PUSH
	LDR
	PUSH
	LDI $01
	CLC
	ADD
	PUSH
	LDI BALLADDRESS
	STR
	;INCREASE X, INCREASE Y
	LDI BALLX
	PUSH
	LDR
	PUSH
	LDI $01
	CLC
	ADD
	PUSH
	PUSH
	LDI BALLX
	STR
	POP
	CMP $0F
	BGE CHANGEBOTTOMX
	SEC
	BGE MOVEY-BOTTOMLEFT
	CHANGEBOTTOMX:
		;CHANGE DIRECTION TO 0
		LDI #00
		PUSH
		LDI BALLDIRADDRESS
		STR
		
	SEC
	BGE MOVEY-BOTTOMLEFT
	
MOVETOPLEFT:

	SEC
	BGE DRAWBALL

MOVETOPRIGHT:
	
	SEC
	BGE DRAWBALL


	
DRAWBALL:
	;DRAW TO SCREEN
	LDI BALLADDRESS
	PUSH
	LDR
	CMP #128	;IF DIRECTION LESS THAN 128, SET PAGE TO 6, ADD 128 TO LOCATION
	BGE DRAWMORETHAN128
DRAWLESSTHAN128:
	;BALL ADDRESS IN REGISTER (NOT NEEDED YET SO IGNORE FOR NOW)
	LDI #06	;SET BLOCK TO 6
	PUSH
	LDI #00
	STR		;BLOCK NOW SET
	;GET COLOR VALUE
	LDI BALLCOLORADDRESS
	PUSH
	LDR
	PUSH	;NOW ON TOP OF STACK
	LDI BALLADDRESS
	PUSH
	LDR
	PUSH
	LDI #128
	CLC
	ADD		;ADJUSTED ADDRESS NOW IN REGISTER
	STR
	SEC 
	BGE AFTERDRAW
	
DRAWMORETHAN128:
	;SET BLOCK TO 7
	LDI #07
	PUSH
	LDI #00
	STR		;BLOCK NOW SET TO 7
	;GET COLOR VALUE
	LDI BALLCOLORADDRESS
	PUSH
	LDR
	PUSH	;NOW ON TOP OF STACK
	LDI BALLADDRESS
	PUSH
	LDR
	STR		;DRAW
	 
AFTERDRAW:
;INCREASE BALL COLOR
	LDI BALLCOLORADDRESS
	PUSH
	LDR
	PUSH
	LDI $FC
	CLC
	ADD
	PUSH
	PUSH
	LDI BALLCOLORADDRESS
	STR
	POP
	CMP #64
	BGE RESETBALLCOLOR
BACKTOBEGINING:	
	SEC
	BGE BACKPEDAL-BALL
RESETBALLCOLOR:
	LDI $3E
	PUSH
	LDI BALLCOLORADDRESS
	STR
	SEC
	BGE BACKTOBEGINING