;THIS PROGRAM DRAWS A BORDER AROUND THE EDGE OF THE 16x16px SCREEN
;THE BORDER POSITIONS ARE FIRST CALCULATED
;THEN DRAWN ONE AT A TIME

COLORADDRESS = $01
CURRENTADDRESS = $02
BORDERADDRESS = $03

;INIT BORDERADDRESS TO $10
LDI $10
PUSH
LDI BORDERADDRESS
STR

;LOADING BORDER LOCATIONS:
TOPROW:
	;0 TO 15
	LDI CURRENTADDRESS
	PUSH
	LDR
	PUSH
	LDI BORDERADDRESS
	PUSH
	LDR
	STR
		;INCREASE BORDERADDRESS
		LDI BORDERADDRESS
		PUSH
		LDR
		PUSH
		LDI $01
		CLC
		ADD
		PUSH
		LDI BORDERADDRESS
		STR
		;INCREASE CURRENTADDRESS
		LDI CURRENTADDRESS
		PUSH
		LDR
		PUSH
		LDI $01
		CLC
		ADD
		;SAVE
		PUSH
		PUSH
		LDI CURRENTADDRESS
		STR
		;CHECK IF AT $10
		POP
		CMP $10
		BGE LEFTROW
		;BACK TO TOP
		SEC
		BGE TOPROW
		
LEFTROW:
	;$10 TO $E0
	LDI CURRENTADDRESS
	PUSH
	LDR
	PUSH
	LDI BORDERADDRESS
	PUSH
	LDR
	STR
		;INCREASE BORDERADDRESS
		LDI BORDERADDRESS
		PUSH
		LDR
		PUSH
		LDI $01
		CLC
		ADD
		PUSH
		LDI BORDERADDRESS
		STR
		;INCREASE CURRENTADDRESS
		LDI CURRENTADDRESS
		PUSH
		LDR
		PUSH
		LDI $10
		CLC
		ADD
		;SAVE
		PUSH
		PUSH
		LDI CURRENTADDRESS
		STR
		;CHECK IF AT $F0
		POP
		CMP $F0
		BGE BOTTOMROW
		;BACK TO TOP
		SEC
		BGE LEFTROW
		
BOTTOMROW:
	;$F0 TO $FF
	LDI CURRENTADDRESS
	PUSH
	LDR
	PUSH
	LDI BORDERADDRESS
	PUSH
	LDR
	STR
		;CHECK IF AT $FF
		LDI CURRENTADDRESS
		PUSH
		LDR
		CMP $FF
		BGE RIGHTROWINIT
		;INCREASE BORDERADDRESS
		LDI BORDERADDRESS
		PUSH
		LDR
		PUSH
		LDI $01
		CLC
		ADD
		PUSH
		LDI BORDERADDRESS
		STR
		;INCREASE CURRENTADDRESS
		LDI CURRENTADDRESS
		PUSH
		LDR
		PUSH
		LDI $01
		CLC
		ADD
		;SAVE
		PUSH
		LDI CURRENTADDRESS
		STR
		;BACK TO TOP
		SEC
		BGE BOTTOMROW

RIGHTROWINIT:
	;INCREASE BORDERADDRESS
	LDI BORDERADDRESS
	PUSH
	LDR
	PUSH
	LDI $01
	CLC
	ADD
	PUSH
	LDI BORDERADDRESS
	STR
	
	;SET CURRENTADDRESS TO $1F
	LDI $1F
	PUSH
	LDI CURRENTADDRESS
	STR
RIGHTROW:
	;$1F TO $EF
	LDI CURRENTADDRESS
	PUSH
	LDR
	PUSH
	LDI BORDERADDRESS
	PUSH
	LDR
	STR
		;INCREASE BORDERADDRESS
		LDI BORDERADDRESS
		PUSH
		LDR
		PUSH
		LDI $01
		CLC
		ADD
		PUSH
		LDI BORDERADDRESS
		STR
		;INCREASE CURRENTADDRESS
		LDI CURRENTADDRESS
		PUSH
		LDR
		PUSH
		LDI $10
		CLC
		ADD
		;SAVE
		PUSH
		PUSH
		LDI CURRENTADDRESS
		STR
		;CHECK IF AT $FF
		POP
		CMP $FF
		BGE SETCOLOR
		;BACK TO TOP
		SEC
		BGE RIGHTROW

SETCOLOR:
;DRAWING THE BORDER OF THE SCREEN
LDI $0B	;COLOR
PUSH
LDI COLORADDRESS
STR

;RESET BORDERADDRESS TO $10 TO READ INDIRECTLY
LDI $10
PUSH
LDI BORDERADDRESS
STR

SEC
BGE DRAW

DRAWPIXEL:
	;TEST IF AT END
	LDI BORDERADDRESS
	PUSH
	LDR
	PUSH
	LDR
	CMP $01
	BGE DRAW
	SEC 
	BGE END
	DRAW:
	;DRAW TO SCREEN
	LDI BORDERADDRESS
	PUSH
	LDR
	PUSH
	LDR
	CMP #128	;IF DIRECTION LESS THAN 128, SET PAGE TO 6, ADD 128 TO LOCATION
	BGE DRAWMORETHAN128
DRAWLESSTHAN128:
	;BALL ADDRESS IN REGISTER (NOT NEEDED YET SO IGNORE FOR NOW)
	LDI #06	;SET BLOCK TO 6
	PUSH
	LDI #00
	STR		;BLOCK NOW SET
	;GET COLOR VALUE
	LDI COLORADDRESS
	PUSH
	LDR
	PUSH	;NOW ON TOP OF STACK
	LDI BORDERADDRESS
	PUSH
	LDR
	PUSH
	LDR
	PUSH
	LDI #128
	CLC
	ADD		;ADJUSTED ADDRESS NOW IN REGISTER
	STR
	SEC 
	BGE AFTERDRAW
	
DRAWMORETHAN128:
	;SET BLOCK TO 7
	LDI #07
	PUSH
	LDI #00
	STR		;BLOCK NOW SET TO 7
	;GET COLOR VALUE
	LDI COLORADDRESS
	PUSH
	LDR
	PUSH	;NOW ON TOP OF STACK
	LDI BORDERADDRESS
	PUSH
	LDR
	PUSH
	LDR
	STR		;DRAW
	 
AFTERDRAW:
	;INCREASE COLOR BY $2
	LDI COLORADDRESS
	PUSH
	LDR
	PUSH
	LDI $02
	CLC
	ADD
	PUSH
	LDI COLORADDRESS
	STR
	
	;INCREASE BORDERADDRESS
	LDI BORDERADDRESS
	PUSH
	LDR
	PUSH
	LDI #01
	CLC
	ADD
	PUSH
	LDI BORDERADDRESS
	STR
	
	;BACK TO THE BEGINING OF THE DRAW LOOP
	SEC
	BGE DRAWPIXEL
	
	END:
		BGE END
		